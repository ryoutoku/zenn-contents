---
title: "WSL2 Ubuntu 18.04ã‹ã‚‰20.04ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ãŸã¨ãã«è©°ã¾ã£ãŸã‘ã©è§£æ¶ˆã—ãŸè©±"
emoji: "ğŸŒŸ"
type: "tech"
topics: ["ubuntu", "wsl", "ç’°å¢ƒæ§‹ç¯‰", "ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰"]
published: true
---

## ç’°å¢ƒ

- WSL2
- Ubuntu 18.04

## ç¾è±¡

Ubuntu 18.04 ã‹ã‚‰ 20.04 ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹ãŸã‚ã€ä»¥ä¸‹ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ãŸãŒã€ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ãŒé€”ä¸­ã§æ­¢ã¾ã‚‹ã€‚

```bash
sudo apt update
sudo apt dist-upgrade
sudo apt autoremove
sudo apt install update-manager-core
sudo do-release-upgrade

#### ä¸­ç•¥ ####

Building dependency tree
Reading state information... Done

Restoring original system state

Aborting
Reading package lists... Done
Building dependency tree
Reading state information... Done
=== Command terminated with exit status 1
```

## çµè«–

### æ–¹æ³• 1 ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ™‚ã«å®Ÿè¡Œã•ã‚Œã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å¤‰æ›´ã™ã‚‹

[å‚è€ƒ 1](https://github.com/microsoft/WSL/issues/6942#issuecomment-842629885)ã‚„[å‚è€ƒ 2](https://salamann.com/wsl2_ubuntu-18-04to20-04)ã«è¨˜è¼‰ã®æ–¹æ³•ã€‚
ä»¥ä¸‹è©²å½“éƒ¨ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ãŸã®ã¡ã€`sudo do-release-upgrade`ã‚’å®Ÿè¡Œã™ã‚‹ã€‚

```py:/tmp/ubuntu-release-upgrader-xxxxxxxx/DistUpgradeQuirks.py
#        if cache['snapd'].is_installed:
#            self._checkStoreConnectivity()
```

### æ–¹æ³• 2 è©²å½“ãƒ„ãƒ¼ãƒ«ã‚’ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹(ã‚„ã£ãŸæ–¹æ³•)

`snapd`ã®ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã®ã¡ã€`sudo do-release-upgrade`ã‚’å®Ÿè¡Œã™ã‚‹ã€‚

```bash
# snapdã®å‰Šé™¤
sudo apt remove snapd
```

## è€ƒå¯Ÿã€ç¢ºèªãªã©

å‚è€ƒæ–‡çŒ®ã§ã¯ã€ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã«ã¦å¯¾å¿œã—ã¦ã„ãŸãŒã€`snapd`ã‚’ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‚‚å•é¡Œãªã‹ã£ãŸã€‚
ä»¥ä¸‹ã€ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰å¾Œã« snapd ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã¿ãŸçµæœã€‚

```bash
sudo apt install snapd
Reading package lists... Done
Building dependency tree
Reading state information... Done
snapd is already the newest version (2.54.3+20.04.1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
```

## å‚è€ƒ

<https://salamann.com/wsl2_ubuntu-18-04to20-04>
<https://github.com/microsoft/WSL/issues/6942>
